{"name": "three_tier_hierarchy", "entityType": "vision_standard", "observations": ["Lower tiers cannot modify higher tiers. Vision conflicts override all other work.", "T1 Vision: immutable, human-only modification", "T2 Architecture: human-gated, requires approval", "T3 Quality: automated, freely modifiable by agents"], "protectionTier": "vision"}
{"name": "vision_tier_human_only", "entityType": "vision_standard", "observations": ["Only humans can create or modify vision-tier entities", "Vision conflicts: work stops, must conform, escalate to human", "Vision standards are inviolable"], "protectionTier": "vision"}
{"name": "every_task_governed", "entityType": "vision_standard", "observations": ["Every implementation task is governed from creation", "PostToolUse hook fires for EVERY TaskCreate call, EVERY agent, no exceptions", "Tasks are blocked from birth until governance review approves"], "protectionTier": "vision"}
{"name": "quality_is_deterministic", "entityType": "vision_standard", "observations": ["Use the Quality server's tools, not subjective judgment", "Confidence emerges from deterministic verification first (compile, tests), then track record, then explanation quality", "Never from self-assessment"], "protectionTier": "vision"}
{"name": "no_silent_dismissals", "entityType": "vision_standard", "observations": ["Every finding dismissal requires justification and identity", "No silent dismissals allowed", "Trust engine maintains full audit trail"], "protectionTier": "vision"}
{"name": "pin_review_methodology", "entityType": "vision_standard", "observations": ["All reviews follow PIN: Positive, Innovative, Negative", "Every review verdict includes strengths_summary", "Every finding includes strengths and salvage_guidance", "A blocked verdict does not mean everything is wrong"], "protectionTier": "vision"}
{"name": "platform_native_philosophy", "entityType": "vision_standard", "observations": ["Build Only What the Platform Cannot Do (Principle P9)", "Before building anything custom, ask: Does Claude Code already do this natively?", "If yes, use the native capability; then check for existing MCP servers"], "protectionTier": "vision"}
{"name": "workers_must_submit_decision", "entityType": "vision_standard", "observations": ["Workers MUST call submit_decision before implementing any key choice", "Applies to: pattern_choice, component_design, api_design, deviation, scope_change"], "protectionTier": "vision"}
{"name": "governance_reviewer_isolation", "entityType": "vision_standard", "observations": ["Governance reviewer runs via claude --print (text-only, no MCP needed)", "Isolation is a security feature; prevents reviewer from modifying the system it reviews"], "protectionTier": "vision"}
{"name": "no_em_dashes", "entityType": "vision_standard", "observations": ["Never use em dashes in any generated prose", "Replace with commas, semicolons, colons, or parentheses"], "protectionTier": "vision"}
{"name": "five_quality_gates", "entityType": "vision_standard", "observations": ["Workers must pass all five quality gates before completion", "Gates: build, lint, tests, coverage (80% threshold), findings", "Use check_all_gates() or validate() to verify"], "protectionTier": "vision"}
{"name": "hook_based_governance", "entityType": "architectural_standard", "observations": ["Governance verification via 5 Claude Code lifecycle hooks", "PostToolUse on TaskCreate: pairs every task with governance review", "PreToolUse on ExitPlanMode: verifies plans before presentation", "PreToolUse on Write|Edit|Bash|Task: coordinates work during holistic review", "TeammateIdle: prevents idle with pending governance obligations", "TaskCompleted: prevents completion if review pending or blocked"], "protectionTier": "architecture"}
{"name": "holistic_review_settle_debounce", "entityType": "pattern", "observations": ["Background checker waits 3s after last TaskCreate (settle/debounce)", "Triggers collective intent review of all session tasks", "Session-scoped flag: .avt/.holistic-review-pending-{session_id}", "PreToolUse gate blocks mutations during review (~1ms fast path when absent)", "MIN_TASKS_FOR_REVIEW = 2; single tasks skip holistic review", "Stale flags older than 5 minutes auto-cleared"], "protectionTier": "architecture"}
{"name": "knowledge_graph_mcp_server", "entityType": "component", "observations": ["JSONL-based persistent institutional memory", "11 MCP tools: create_entities, create_relations, add_observations, search_nodes, get_entity, get_entities_by_tier, delete_observations, delete_entity, delete_relations, ingest_documents, validate_tier_access", "Append-only storage with compaction after 1000 writes", "Data: .avt/knowledge-graph.jsonl", "Port 3101 (HTTP mode), stdio (MCP mode)"], "protectionTier": "architecture"}
{"name": "quality_mcp_server", "entityType": "component", "observations": ["Deterministic quality verification wrapping external tools", "10 MCP tools: auto_format, run_lint, run_tests, check_coverage, check_all_gates, validate, get_trust_decision, record_dismissal, get_all_findings, get_dismissal_history", "SQLite-backed trust engine for finding management", "Data: .avt/trust-engine.db", "Port 3102 (HTTP mode), stdio (MCP mode)"], "protectionTier": "architecture"}
{"name": "governance_mcp_server", "entityType": "component", "observations": ["Transactional decision review with AI-powered review", "12 MCP tools: submit_decision, submit_plan_for_review, submit_completion_review, get_decision_history, get_governance_status, create_governed_task, add_review_blocker, complete_task_review, get_task_review_status, get_pending_reviews, get_usage_report, release_task", "SQLite persistence for decisions, verdicts, reviews", "Data: .avt/governance.db", "Port 3103 (HTTP mode), stdio (MCP mode)"], "protectionTier": "architecture"}
{"name": "agent_teams_orchestration", "entityType": "pattern", "observations": ["Primary orchestration mechanism: Claude Code Agent Teams", "Each teammate: full Claude Code session with independent MCP access", "Shared task list via CLAUDE_CODE_TASK_LIST_ID", "Self-claim of unblocked tasks; direct peer messaging", "Hook enforcement fires for all teammates", "Fallback: Task-tool subagents if Agent Teams unavailable"], "protectionTier": "architecture"}
{"name": "eight_specialized_agents", "entityType": "component", "observations": ["worker (Opus): implements tasks, needs KG + Quality + Governance MCP", "quality-reviewer (Sonnet): three-lens evaluation, needs KG + Quality MCP", "kg-librarian (Sonnet): memory curation, needs KG MCP", "governance-reviewer (Sonnet): AI review via claude --print, no MCP", "researcher (Sonnet): dual-mode research, needs KG + Governance MCP + WebSearch", "project-steward (Sonnet): project hygiene, needs KG MCP", "architect (Opus): architectural decisions, needs KG + Governance MCP", "project-bootstrapper (Sonnet): codebase discovery, needs KG + Governance MCP", "Definitions in .claude/agents/"], "protectionTier": "architecture"}
{"name": "governed_task_lifecycle", "entityType": "pattern", "observations": ["Tasks are blocked from birth: impl task atomically paired with review task", "Implementation cannot proceed until all reviews approve", "Multi-blocker stacking: governance + security + architecture on same task", "Three-lens review priority: Vision first, Architecture second, Quality third"], "protectionTier": "architecture"}
{"name": "vscode_extension", "entityType": "component", "observations": ["Observability layer for monitoring system state", "MCP clients, TreeView providers, webview dashboard", "Path: extension/", "Language: TypeScript"], "protectionTier": "architecture"}
{"name": "webview_dashboard", "entityType": "component", "observations": ["React + Tailwind SPA for dashboard, wizard (9 steps), tutorial (10 steps)", "Dual-mode via transport abstraction: VS Code postMessage or HTTP + WebSocket", "Path: extension/webview-dashboard/", "Language: TypeScript/React"], "protectionTier": "architecture"}
{"name": "avt_gateway", "entityType": "component", "observations": ["FastAPI backend for remote operation", "35 REST endpoints, WebSocket push at /api/ws, job runner", "API-key authentication with auto-generated bearer token", "Path: server/", "Language: Python"], "protectionTier": "architecture"}
{"name": "e2e_testing_harness", "entityType": "component", "observations": ["14 scenarios, 292+ structural assertions", "Domain randomization from 8 project templates", "Per-scenario isolation: separate KG, SQLite, task directory", "Parallel execution via ThreadPoolExecutor", "Deterministic with --seed flag", "Path: e2e/"], "protectionTier": "architecture"}
{"name": "temp_file_io_pattern", "entityType": "pattern", "observations": ["CLI invocations use temp file I/O instead of -p flag or stdin pipes", "Avoids CLI arg length limits (~256KB on macOS) and pipe buffering", "Applied in DashboardWebviewProvider.ts and reviewer.py"], "protectionTier": "architecture"}
{"name": "checkpoint_resume_pattern", "entityType": "pattern", "observations": ["After meaningful work: write to .avt/session-state.md, git tag checkpoint-NNN", "Resume from last checkpoint on failure"], "protectionTier": "architecture"}
{"name": "drift_detection", "entityType": "pattern", "observations": ["Four types: time drift, loop drift, scope drift, quality drift", "Stop failing worker and reassess when detected"], "protectionTier": "architecture"}
{"name": "python_conventions", "entityType": "coding_convention", "observations": ["Python: snake_case for functions/variables, PascalCase for classes", "Type hints: Pydantic models with field aliases (entityType in JSON, entity_type in Python)", "FastMCP framework for MCP servers", "SQLite for relational persistence, JSONL for append-only KG", "uv for dependency management (pyproject.toml + uv.lock)"], "protectionTier": "quality"}
{"name": "typescript_conventions", "entityType": "coding_convention", "observations": ["TypeScript: camelCase for functions/variables, PascalCase for types/components", "React functional components with hooks (useContext, useState, useEffect)", "Context pattern for state management (DashboardContext)", "esbuild for extension bundling, Vite for webview dashboard", "Tailwind CSS for styling"], "protectionTier": "quality"}
{"name": "shell_conventions", "entityType": "coding_convention", "observations": ["Shell: set -e for error handling, CLAUDE_PROJECT_DIR for path resolution", "Hooks use $CLAUDE_PROJECT_DIR env var for project-relative paths", "Background processes for async review (settle checker)", "Exit codes for hook pass/fail signaling"], "protectionTier": "quality"}
{"name": "bootstrap_scale_assessment", "entityType": "observation", "observations": ["Scale tier: Medium (37.9K LOC, 209 source files, 97 docs)", "Languages: Python (95 files), TypeScript (36), TSX (47), Shell (22), JS (9)", "8 package boundaries (package.json + pyproject.toml)", "9 top-level directories: docs, e2e, extension, mcp-servers, prompts, scripts, server, templates, work"], "protectionTier": "quality"}

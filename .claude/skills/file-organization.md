---
name: file-organization
description: Project file organization and directory structure reference
user_invocable: true
---

# File Organization

```
~/.claude/
└── mcp.json                         # User-scope MCP server config (KG, Quality, Governance)

.claude/
├── agents/                          # Agent definitions (system prompts + role specs)
│   ├── worker.md
│   ├── quality-reviewer.md
│   ├── kg-librarian.md
│   ├── governance-reviewer.md
│   ├── architect.md
│   ├── researcher.md
│   ├── project-steward.md
│   └── project-bootstrapper.md
├── collab/
│   ├── knowledge-graph.jsonl        # KG persistence (managed by server)
│   ├── trust-engine.db              # Trust engine SQLite DB (managed by server)
│   └── governance.db                # Governance SQLite DB (managed by server)
└── settings.json                    # Claude Code settings, hooks, env vars, agents

.avt/                                # Agent Vision Team system config
├── task-briefs/                     # Task briefs for workers
├── session-state.md                 # Current session progress
├── bootstrap-report.md              # Bootstrap discovery report (generated by bootstrapper)
├── bootstrap-rules-draft.json       # Draft project rules from bootstrap (pending approval)
├── .holistic-review-pending-*       # Session-scoped flag files: gate mutation tools during holistic review
├── memory/                          # Archival memory files (synced by KG Librarian)
│   ├── architectural-decisions.md   # Significant decisions and rationale
│   ├── troubleshooting-log.md       # Problems, attempts, solutions
│   ├── solution-patterns.md         # Promoted patterns with implementations
│   └── research-findings.md         # Key research discoveries (baseline knowledge)
├── research-prompts.json            # Research prompt registry
├── research-prompts/                # Individual research prompt files
│   └── rp-xxx.md                    # Research prompt definitions
├── research-briefs/                 # Research output briefs
│   └── rb-xxx.md                    # Completed research briefs
├── audit/                           # Audit agent runtime storage (gitignored)
│   ├── events.jsonl                 # Append-only event log (source of truth)
│   ├── statistics.db                # SQLite rolling aggregates
│   ├── recommendations.json         # Active recommendations
│   ├── checkpoint.json              # Last-processed byte offset
│   ├── .last-event-ts               # Settle coordination timestamp
│   └── .processor-lock              # File-based exclusion lock
└── project-config.json              # Project configuration

docs/                                    # Project-level documentation
├── vision/                              # Vision standard documents (project artifacts)
├── architecture/                        # Architecture documents (project artifacts)
│   ├── overview.md                      # System-level architecture overview with diagrams
│   ├── components/                      # Per-component architecture docs
│   ├── patterns/                        # Cross-cutting architectural pattern docs
│   └── flows/                           # Key interaction sequence diagrams
├── style/                               # Coding conventions and style guide
│   └── style-guide.md                   # Discovered conventions (generated by bootstrapper)
└── project-overview.md                  # Project overview

e2e/                                     # Autonomous E2E testing harness
├── run-e2e.sh                           # Shell entry point (workspace + cleanup)
├── run-e2e.py                           # Python orchestrator
├── pyproject.toml                       # Dependencies
├── generator/                           # Unique project generation per run
├── scenarios/                           # 14 test scenarios (s01-s14)
├── parallel/                            # ThreadPoolExecutor + isolation
└── validation/                          # Assertion engine + report generator

scripts/hooks/                               # Claude Code lifecycle hooks
├── governance-task-intercept.py          # PostToolUse:TaskCreate handler
├── holistic-review-gate.sh              # PreToolUse mutation tool gate
├── context-reinforcement.py             # PreToolUse context injection
├── verify-governance-review.sh          # PreToolUse:ExitPlanMode gate
├── post-compaction-reinject.sh          # SessionStart:compact recovery
├── teammate-idle-gate.sh               # TeammateIdle gate
├── task-completed-gate.sh              # TaskCompleted gate
├── _holistic-settle-check.py           # Background settle checker (governance)
├── _run-governance-review.sh           # Individual review runner
├── _audit-settle-check.py              # Background settle checker (audit, 5s)
├── _audit-process.py                   # Audit event processor
├── _audit-escalate.py                  # Tiered LLM escalation chain
└── audit/                              # Audit agent library
    ├── emitter.py                      # emit_audit_event() (fire-and-forget)
    ├── config.py                       # Load audit settings
    ├── directives.json                 # 5 observation directives (editable)
    ├── stats.py                        # StatsAccumulator (SQLite)
    ├── anomaly.py                      # AnomalyDetector (5 threshold checks)
    ├── recommendations.py              # RecommendationManager (JSON lifecycle)
    ├── escalation.py                   # LLM chain (Haiku -> Sonnet -> Opus)
    ├── prompts.py                      # Prompt builders + directive matching
    └── tests/                          # 53 unit tests

server/                                  # AVT Gateway (headless web mode)
├── avt_gateway/                         # FastAPI application
│   ├── app.py                           # HTTP/WebSocket API + SPA serving
│   ├── config.py                        # Environment config + API key management
│   ├── services/project_manager.py      # Multi-project lifecycle + port allocation
│   ├── routers/                         # Per-project and global API routes
│   └── ws/manager.py                    # WebSocket real-time event push
├── static/                              # Compiled web dashboard SPA
├── Dockerfile                           # Containerized deployment
├── entrypoint.sh                        # Container startup sequence
└── nginx.conf                           # TLS reverse proxy + WebSocket upgrade
```
